<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Darts Game Chooser</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@400;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="ui/global.css">
    <link rel="stylesheet" href="/ui/game_picker.css">
    <link rel="stylesheet" href="/dev/slide_panel.css">
    <style>

    </style>
</head>

<body>
    <div class="full-layer overlay-controls">
        <div class="back-btn position-fixed top-0 start-0 m-3 d-none align-items-center justify-content-center"
            id="backBtn" onclick="goBack()">←</div>
        <div class="fullscreen-btn position-fixed top-0 end-0 m-3 d-flex align-items-center justify-content-center"
            id="fullscreenBtn" onclick="toggleFullscreen()">⛶</div>

        <div class="slidep-panel-container">
            <!-- Left Panel System -->
            <div class="slidep-panel-system slidep-left">
                <div class="slidep-toggle-group slidep-left slidep-visible">
                    <button class="slidep-panel-toggle slidep-left" onclick="togglePanel('navigation')">NAV</button>
                    <button class="slidep-panel-toggle slidep-left" onclick="togglePanel('info')">INFO</button>
                </div>

                <!-- Navigation Panel -->
                <div id="navigation" class="slidep-slice-panel slidep-left slidep-panel-small">
                    <div class="slidep-panel-header">
                        <h2 class="slidep-panel-title">
                            Navigation
                            <button class="slidep-close-btn" onclick="closePanel('navigation')">Close</button>
                        </h2>
                    </div>
                    <div class="slidep-panel-content">
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Quick Links</h3>
                            <button class="slidep-control-button">Dashboard</button>
                            <button class="slidep-control-button">Projects</button>
                            <button class="slidep-control-button">Settings</button>
                            <button class="slidep-control-button">Help</button>
                            <button class="slidep-control-button">Profile</button>
                            <button class="slidep-control-button">Messages</button>
                        </div>
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Recent Items</h3>
                            <div class="slidep-control-group">
                                <label class="slidep-control-label">Project A</label>
                                <input type="text" class="slidep-control-input" placeholder="Last modified 2 hours ago">
                            </div>
                            <div class="slidep-control-group">
                                <label class="slidep-control-label">Project B</label>
                                <input type="text" class="slidep-control-input" placeholder="Last modified 1 day ago">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info Panel -->
                <div id="info" class="slidep-slice-panel slidep-left slidep-panel-small">
                    <div class="slidep-panel-header">
                        <h2 class="slidep-panel-title">
                            Information
                            <button class="slidep-close-btn" onclick="closePanel('info')">Close</button>
                        </h2>
                    </div>
                    <div class="slidep-panel-content">
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">System Info</h3>
                            <p style="color: rgba(255,255,255,0.8); line-height: 1.6;">
                                <strong>Version:</strong> 2.0.0<br>
                                <strong>Build:</strong> 2024.12.30<br>
                                <strong>Panels Open:</strong> <span id="panelCount">0</span>
                            </p>
                        </div>
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Features</h3>
                            <ul style="color: rgba(255,255,255,0.8); line-height: 1.8; list-style: none;">
                                <li>✓ Simple class-based management</li>
                                <li>✓ Left/right positioning</li>
                                <li>✓ Panel stacking</li>
                                <li>✓ Keyboard shortcuts</li>
                                <li>✓ Responsive design</li>
                                <li>✓ No DOM recreation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel System -->
            <div class="slidep-panel-system slidep-right">
                <div class="slidep-toggle-group slidep-right slidep-visible">
                    <button class="slidep-panel-toggle slidep-right" onclick="togglePanel('settings')">SET</button>
                    <button class="slidep-panel-toggle slidep-right" onclick="togglePanel('tools')">TOOL</button>
                </div>

                <!-- Settings Panel -->
                <div id="settings" class="slidep-slice-panel slidep-right slidep-panel-small">
                    <div class="slidep-panel-header">
                        <h2 class="slidep-panel-title">
                            Settings
                            <button class="slidep-close-btn" onclick="closePanel('settings')">Close</button>
                        </h2>
                    </div>
                    <div class="slidep-panel-content">
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Display Settings</h3>
                            <div class="slidep-control-group">
                                <label class="slidep-control-label">Theme</label>
                                <select class="slidep-control-select">
                                    <option>Dark Mode</option>
                                    <option>Light Mode</option>
                                    <option>Auto</option>
                                </select>
                            </div>
                            <div class="slidep-control-group">
                                <label class="slidep-control-label">Font Size</label>
                                <select class="slidep-control-select">
                                    <option>Small</option>
                                    <option selected>Medium</option>
                                    <option>Large</option>
                                </select>
                            </div>
                            <div class="slidep-control-group">
                                <label class="slidep-control-checkbox">
                                    <input type="checkbox" checked>
                                    <span>Enable animations</span>
                                </label>
                            </div>
                        </div>
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Panel Management</h3>
                            <button class="slidep-control-button slidep-primary" onclick="togglePanel('tools')">Open
                                Tools</button>
                            <button class="slidep-control-button" onclick="togglePanel('info')">Open Info</button>
                            <button class="slidep-control-button" onclick="closeAllPanels()">Close All</button>
                        </div>
                    </div>
                </div>

                <!-- Tools Panel -->
                <div id="tools" class="slidep-slice-panel slidep-right slidep-panel-small">
                    <div class="slidep-panel-header">
                        <h2 class="slidep-panel-title">
                            Tools
                            <button class="slidep-close-btn" onclick="closePanel('tools')">Close</button>
                        </h2>
                    </div>
                    <div class="slidep-panel-content">
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Development Tools</h3>
                            <button class="slidep-control-button">Inspector</button>
                            <button class="slidep-control-button">Console</button>
                            <button class="slidep-control-button">Network</button>
                            <button class="slidep-control-button">Performance</button>
                        </div>
                        <div class="slidep-panel-section">
                            <h3 class="slidep-section-title">Utilities</h3>
                            <div class="slidep-control-group">
                                <label class="slidep-control-label">Color Picker</label>
                                <input type="color" class="slidep-control-input" value="#667eea">
                            </div>
                            <div class="slidep-control-group">
                                <label class="slidep-control-label">JSON Formatter</label>
                                <textarea class="slidep-control-input" rows="4"
                                    placeholder="Paste JSON here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="full-layer container-fluid min-vh-100 d-flex flex-column justify-content-center align-items-center p-4"
        id="gamePicker">
        <div class="title text-center mb-5" id="titleSection">
            <h1 class="display-1 mb-3">WEB-DARTS<p class="fs-6 fst-italic">DartNet Compatible</p></h1>
        </div>

        <div class="games-grid" id="gamesGrid">
            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('X01', '/images/games/x01.png', 'Classic countdown game - reach exactly zero', ['301', '501', '701', '1001'])">
                <img class="game-icon" src="/images/games/x01.png" alt="X01 Game">
                <div class="game-title mb-2">X01</div>
                <div class="game-description">Classic countdown game - reach exactly zero</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Cricket', '/images/games/cricket.png', 'Hit numbers 20, 19, 18, 17, 16, 15, and bullseye', ['Standard', 'Cut Throat', 'No Score'])">
                <img class="game-icon" src="/images/games/cricket.png" alt="Cricket Game">
                <div class="game-title mb-2">Cricket</div>
                <div class="game-description">Strategic battle for key numbers</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Round the Clock', '/images/games/round_the_clock.png', 'Hit numbers 1 through 20 in sequence', ['1-20', '20-1', '1-15'])">
                <img class="game-icon" src="/images/games/round_the_clock.png" alt="Round the Clock Game">
                <div class="game-title mb-2">Round the Clock</div>
                <div class="game-description">Sequential number challenge</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Killer', '/images/games/killer.png', 'Eliminate opponents by hitting their numbers', ['3 Lives', '5 Lives', '7 Lives'])">
                <img class="game-icon" src="/images/games/killer.png" alt="Killer Game">
                <div class="game-title mb-2">Killer</div>
                <div class="game-description">Survival elimination game</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Around the World', '/images/games/round_the_world.png', 'Hit every number on the board once', ['Singles', 'Doubles', 'Trebles'])">
                <img class="game-icon" src="/images/games/round_the_world.png" alt="Around the World Game">
                <div class="game-title mb-2">Around the World</div>
                <div class="game-description">Complete the full circle</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('High Score', '/images/games/high_score.png', 'Score the highest total in 3 darts', ['3 Darts', '6 Darts', '9 Darts'])">
                <img class="game-icon" src="/images/games/high_score.png" alt="High Score Game">
                <div class="game-title mb-2">High Score</div>
                <div class="game-description">Maximum points challenge</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Chase', '/images/games/chase.png', 'Chase your opponents', ['Random Start', 'Use multipliers'])">
                <img class="game-icon" src="/images/games/chase.png" alt="Chase Game">
                <div class="game-title mb-2">Chase</div>
                <div class="game-description">Chase your opponents</div>
            </div>
        </div>
    </div>

    <!-- Game Details Modal -->
    <div class="modal fade" id="gameDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content details-content">
                <div class="modal-body text-center p-5">
                    <!-- <img class="game-icon" id="detailsBackground"></img> -->
                    <h2 class="details-title mb-3" id="detailsTitle">501</h2>
                    <p class="details-description mb-4" id="detailsDescription">Classic countdown from 501 to exactly
                        zero</p>

                    <div class="row g-3 mb-4" id="optionsGrid">
                        <!-- Options will be populated dynamically -->
                    </div>

                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                        <button class="btn btn-custom-primary px-4 py-2" onclick="startGame()">Start Game</button>
                        <button class="btn btn-custom-secondary px-4 py-2" onclick="goBack()">Back</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Include all JavaScript files -->
    <!-- <script src="ui/RoundAnimation.js"></script>
    <script src="utils/EventEmitter.js"></script>
    <script src="core/Throw.js"></script>
    <script src="games/GameBase.js"></script>
    <script src="games/X01/GameX01.js"></script>
    <script src="games/GameRegistry.js"></script>
    <script src="ui/DartboardRenderer.js"></script>
    <script src="utils/StatisticsEngine.js"></script>
    <script src="utils/NetworkManager.js"></script>-->
    <script src="/ui/global.js"></script>
    <script src="/dev/slide_panel.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        let selectedGame = null;
        let selectedOptions = {};
        let gameDetailsModal;
        let gamePicker;
        let gameDetailsModalElement;

        // Initialize modal
        document.addEventListener('DOMContentLoaded', function () {
            gamePicker = document.getElementById('gamePicker');
            gameDetailsModalElement = document.getElementById('gameDetailsModal')
            gameDetailsModal = new bootstrap.Modal(gameDetailsModalElement);
            // Add entrance animation to cards
            const cards = document.querySelectorAll('.game-card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${(index + 1) * 0.15}s`;
                card.classList.add('animate-in');
            });
        });

        function selectGame(title, background, description, options) {
            selectedGame = { title, background, description, options };

            // Animate cards out
            gamePicker.classList.add('slide-out');

            // Show details after animation
            setTimeout(() => {
                showGameDetails();
            }, 800);
        }

        function showGameDetails() {

            gameDetailsModalElement.style.backgroundRepeat = "no-repeat";
            gameDetailsModalElement.style.backgroundSize = "auto";
            gameDetailsModalElement.style.background = 'linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url("' + selectedGame.background + '")'


            //document.getElementById('detailsBackground').src = selectedGame.background;
            document.getElementById('detailsTitle').textContent = selectedGame.title;
            document.getElementById('detailsDescription').textContent = selectedGame.description;

            // Populate options
            const optionsGrid = document.getElementById('optionsGrid');
            optionsGrid.innerHTML = '';
            selectedGame.options.forEach((option, index) => {
                const col = document.createElement('div');
                col.className = 'col-6 col-sm-4';

                const optionBtn = document.createElement('div');
                optionBtn.className = 'option-btn p-3 text-center';
                if (index === 0) {
                    optionBtn.classList.add('selected');
                    selectedOptions[selectedGame.title] = option;
                }
                optionBtn.textContent = option;
                optionBtn.onclick = () => selectOption(optionBtn, option);

                col.appendChild(optionBtn);
                optionsGrid.appendChild(col);
            });

            gameDetailsModal.show();
        }

        function selectOption(btn, option) {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedOptions[selectedGame.title] = option;
        }

        function startGame() {
            // Add shake animation
            const modalContent = document.querySelector('.modal-content');
            modalContent.style.animation = 'nervousShake 0.5s ease-in-out';

            setTimeout(() => {
                alert(`Starting ${selectedGame.title} with ${selectedOptions[selectedGame.title]} option!`);
                gameDetailsModal.hide(complete=resetView());
                ;
            }, 500);
        }

        function goBack() {
            gameDetailsModal.hide(complete=resetView());
        }

        function resetView() {
            // Hide back button
            // document.getElementById('backBtn').classList.add('d-none');
            // document.getElementById('backBtn').classList.remove('d-flex');
            console.log("Reset view...")
            // Reset all animations
            gamePicker.classList.remove('slide-out');
        }

        // Close modal on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && gameDetailsModal._isShown) {
                gameDetailsModal.hide(complete=resetView());
            }
        });

        // Add some extra arcade flair with random sparkles
        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'fixed';
            sparkle.style.width = '4px';
            sparkle.style.height = '4px';
            sparkle.style.background = 'white';
            sparkle.style.borderRadius = '50%';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.zIndex = '1000';
            sparkle.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.8)';

            sparkle.style.left = Math.random() * window.innerWidth + 'px';
            sparkle.style.top = Math.random() * window.innerHeight + 'px';

            document.body.appendChild(sparkle);

            sparkle.animate([
                { opacity: 0, transform: 'scale(0)' },
                { opacity: 1, transform: 'scale(1)' },
                { opacity: 0, transform: 'scale(0)' }
            ], {
                duration: 2000,
                easing: 'ease-in-out'
            }).onfinish = () => sparkle.remove();
        }

        // Create sparkles randomly
        setInterval(createSparkle, 3000);
    </script>
</body>

</html>