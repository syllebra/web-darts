<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Darts Game Chooser</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/ui/game_picker.css">
    <style>
        
    </style>
</head>

<body>
    <div class="container-fluid min-vh-100 d-flex flex-column justify-content-center align-items-center p-4">
        <div class="back-btn position-fixed top-0 start-0 m-3 d-none align-items-center justify-content-center" id="backBtn" onclick="goBack()">‚Üê</div>

        <div class="title text-center mb-5" id="titleSection">
            <h1 class="display-1 mb-3">WEB-DARTS</h1>
                        <p class="fs-6">DartNet compatible</p>
            <p class="fs-4">Choose Your Game</p>
        </div>

        <div class="games-grid" id="gamesGrid">
            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('X01', '/images/games/x01.png', 'Classic countdown game - reach exactly zero', ['301', '501', '701', '1001'])">
                <img class="game-icon" src="/images/games/x01.png" alt="X01 Game">
                <div class="game-title mb-2">X01</div>
                <div class="game-description">Classic countdown game - reach exactly zero</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Cricket', '/images/games/cricket.png', 'Hit numbers 20, 19, 18, 17, 16, 15, and bullseye', ['Standard', 'Cut Throat', 'No Score'])">
                <img class="game-icon" src="/images/games/cricket.png" alt="Cricket Game">
                <div class="game-title mb-2">Cricket</div>
                <div class="game-description">Strategic battle for key numbers</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Round the Clock', '/images/games/round_the_clock.png', 'Hit numbers 1 through 20 in sequence', ['1-20', '20-1', '1-15'])">
                <img class="game-icon" src="/images/games/round_the_clock.png" alt="Round the Clock Game">
                <div class="game-title mb-2">Round the Clock</div>
                <div class="game-description">Sequential number challenge</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Killer', '/images/games/killer.png', 'Eliminate opponents by hitting their numbers', ['3 Lives', '5 Lives', '7 Lives'])">
                <img class="game-icon" src="/images/games/killer.png" alt="Killer Game">
                <div class="game-title mb-2">Killer</div>
                <div class="game-description">Survival elimination game</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Around the World', '/images/games/round_the_world.png', 'Hit every number on the board once', ['Singles', 'Doubles', 'Trebles'])">
                <img class="game-icon" src="/images/games/round_the_world.png" alt="Around the World Game">
                <div class="game-title mb-2">Around the World</div>
                <div class="game-description">Complete the full circle</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('High Score', '/images/games/high_score.png', 'Score the highest total in 3 darts', ['3 Darts', '6 Darts', '9 Darts'])">
                <img class="game-icon" src="/images/games/high_score.png" alt="High Score Game">
                <div class="game-title mb-2">High Score</div>
                <div class="game-description">Maximum points challenge</div>
            </div>

            <div class="game-card d-flex flex-column justify-content-center align-items-center p-4 text-center"
                onclick="selectGame('Chase', '/images/games/chase.png', 'Chase your opponents', ['Random Start', 'Use multipliers'])">
                <img class="game-icon" src="/images/games/chase.png" alt="Chase Game">
                <div class="game-title mb-2">Chase</div>
                <div class="game-description">Chase your opponents</div>
            </div>
        </div>
    </div>

    <!-- Game Details Modal -->
    <div class="modal fade" id="gameDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content details-content">
                <div class="modal-body text-center p-5">
                    <!-- <img class="game-icon" id="detailsBackground"></img> -->
                    <h2 class="details-title mb-3" id="detailsTitle">501</h2>
                    <p class="details-description mb-4" id="detailsDescription">Classic countdown from 501 to exactly zero</p>

                    <div class="row g-3 mb-4" id="optionsGrid">
                        <!-- Options will be populated dynamically -->
                    </div>

                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                        <button class="btn btn-custom-primary px-4 py-2" onclick="startGame()">Start Game</button>
                        <button class="btn btn-custom-secondary px-4 py-2" data-bs-dismiss="modal">Back</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        let selectedGame = null;
        let selectedOptions = {};
        let gameDetailsModal;

        // Initialize modal
        document.addEventListener('DOMContentLoaded', function() {
            gameDetailsModal = new bootstrap.Modal(document.getElementById('gameDetailsModal'));
            // Add entrance animation to cards
            const cards = document.querySelectorAll('.game-card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${(index + 1) * 0.15}s`;
                card.classList.add('animate-in');
            });
        });

        function selectGame(title, background, description, options) {
            selectedGame = { title, background, description, options };

            // Animate cards out
            const cards = document.querySelectorAll('.game-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('fade-out');
                }, index * 80);
            });

            // Hide title and show back button
            document.getElementById('titleSection').classList.add('slide-out');
            document.getElementById('backBtn').classList.remove('d-none');
            document.getElementById('backBtn').classList.add('d-flex');

            // Show details after animation
            setTimeout(() => {
                showGameDetails();
            }, 800);
        }

        function showGameDetails() {

            var modal = document.getElementById('gameDetailsModal');
            modal.style.backgroundRepeat = "no-repeat";
            modal.style.backgroundSize = "auto";
            modal.style.background = 'linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url("'+selectedGame.background+'")'


            //document.getElementById('detailsBackground').src = selectedGame.background;
            document.getElementById('detailsTitle').textContent = selectedGame.title;
            document.getElementById('detailsDescription').textContent = selectedGame.description;

            // Populate options
            const optionsGrid = document.getElementById('optionsGrid');
            optionsGrid.innerHTML = '';
            selectedGame.options.forEach((option, index) => {
                const col = document.createElement('div');
                col.className = 'col-6 col-sm-4';
                
                const optionBtn = document.createElement('div');
                optionBtn.className = 'option-btn p-3 text-center';
                if (index === 0) {
                    optionBtn.classList.add('selected');
                    selectedOptions[selectedGame.title] = option;
                }
                optionBtn.textContent = option;
                optionBtn.onclick = () => selectOption(optionBtn, option);
                
                col.appendChild(optionBtn);
                optionsGrid.appendChild(col);
            });

            gameDetailsModal.show();
        }

        function selectOption(btn, option) {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedOptions[selectedGame.title] = option;
        }

        function startGame() {
            // Add shake animation
            const modalContent = document.querySelector('.modal-content');
            modalContent.style.animation = 'nervousShake 0.5s ease-in-out';

            setTimeout(() => {
                alert(`Starting ${selectedGame.title} with ${selectedOptions[selectedGame.title]} option!`);
                gameDetailsModal.hide();
                resetView();
            }, 500);
        }

        function goBack() {
            gameDetailsModal.hide();
            resetView();
        }

        function resetView() {
            // Hide back button
            document.getElementById('backBtn').classList.add('d-none');
            document.getElementById('backBtn').classList.remove('d-flex');

            // Reset all animations
            const cards = document.querySelectorAll('.game-card');
            cards.forEach(card => {
                card.classList.remove('fade-out');
                card.style.animation = 'none';
                card.offsetHeight; // Trigger reflow
                card.style.animation = null;
            });

            document.getElementById('titleSection').classList.remove('slide-out');

            // Re-trigger entrance animations
            setTimeout(() => {
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${(index + 1) * 0.15}s`;
                    card.classList.add('animate-in');
                });
            }, 100);
        }

        // Close modal on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && gameDetailsModal._isShown) {
                gameDetailsModal.hide();
                resetView();
            }
        });

        // Add some extra arcade flair with random sparkles
        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'fixed';
            sparkle.style.width = '4px';
            sparkle.style.height = '4px';
            sparkle.style.background = 'white';
            sparkle.style.borderRadius = '50%';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.zIndex = '1000';
            sparkle.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.8)';
            
            sparkle.style.left = Math.random() * window.innerWidth + 'px';
            sparkle.style.top = Math.random() * window.innerHeight + 'px';
            
            document.body.appendChild(sparkle);
            
            sparkle.animate([
                { opacity: 0, transform: 'scale(0)' },
                { opacity: 1, transform: 'scale(1)' },
                { opacity: 0, transform: 'scale(0)' }
            ], {
                duration: 2000,
                easing: 'ease-in-out'
            }).onfinish = () => sparkle.remove();
        }

        // Create sparkles randomly
        setInterval(createSparkle, 3000);
    </script>
</body>

</html>